<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <link rel="stylesheet" href="{% static 'tree_view.css' %}">
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>
<body>
    <div class="graph-container">
        <div class="controls">
            <label for="visualizer-select">Choose visualizer:</label>
            <select id="visualizer-select">
                <option value="block">Block Visualizer</option>
                <option value="simple">Simple Visualizer</option>
            </select>
        </div>

        <div class="views-container">
            <!-- Main View -->
            <div class="view main-view">
                <div class="view-header">Main View - Interactive</div>
                <div class="view-content">
                    <div id="main-block-visualizer" class="visualizer-content">
                        {{ block_visualizer_html | safe }}
                    </div>
                    <div id="main-simple-visualizer" class="visualizer-content hidden">
                        {{ simple_visualizer_html | safe }}
                    </div>
                </div>
            </div>

            <!-- Tree View -->
            <div class="view tree-view">
                <div class="view-header">Tree View</div>
                <div class="view-content" id="tree-container"></div>
            </div>
        </div>
    </div>

    <script>
        window.graphData = {{ graph_json|safe }};

        const select = document.getElementById("visualizer-select");
        const mainBlockDiv = document.getElementById("main-block-visualizer");
        const mainSimpleDiv = document.getElementById("main-simple-visualizer");

        function switchVisualizer(type) {
            if(type === "block") {
                mainBlockDiv.classList.remove("hidden");
                mainSimpleDiv.classList.add("hidden");
            } else {
                mainBlockDiv.classList.add("hidden");
                mainSimpleDiv.classList.remove("hidden");
            }
        }

        select.addEventListener("change", e => switchVisualizer(e.target.value));
        switchVisualizer(select.value);
    </script>

    <script src="{% static 'tree_view.js' %}"></script>
</body>
</html>
