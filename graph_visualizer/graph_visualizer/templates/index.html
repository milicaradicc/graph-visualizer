{% extends 'base.html' %}
{% block head_content %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'tree_view.css' %}">

{% endblock %}
{% block content %}
<!-- Workspace management -->
{% include "workspace_management.html" %}

<!-- Popups -->
{% if messages %}
<div class="popup-container">
  {% for message in messages %}
    <div class="popup {{ message.tags }}">
      <span class="popup-text">{{ message }}</span>
      <span class="popup-close" onclick="this.parentElement.remove()">Ã—</span>
    </div>
  {% endfor %}
</div>
{% endif %}

<script>
    // Auto-close popups after 5 seconds
    setTimeout(() => {
      document.querySelectorAll(".popup").forEach(popup => popup.remove());
    }, 5000);
</script>

<div class="graph-container">
    <!-- Controls for visualizer switch -->
    <div class="controls">
        <label for="visualizer-select">Choose visualizer:</label>
        <select id="visualizer-select">
            <option value="block">Block Visualizer</option>
            <option value="simple">Simple Visualizer</option>
        </select>
    </div>

    <!-- Views container -->
    <div class="views-container">
        <div class="left-view">
        <!-- Tree View -->
            <div class="view tree-view">
                <div class="view-header">Tree View</div>
                <div class="view-content" id="tree-container"></div>
            </div>
        <!-- Bird View -->

            <div id="bird-view" class="graph-view">
            <h3>Bird View</h3>
            {% if bird_html %}
                {{ bird_html | safe }}
            {% else %}
                <svg id="bird-svg"></svg>
            {% endif %}
        </div>
        </div>
        <div class="right-view">
        <!-- Main View -->
            <div id="main-view" class="graph-view">
                <h3>Main View</h3>
                {% if graph_html %}
                    {{ graph_html | safe }}
                {% else %}
                    <svg id="main-svg"></svg>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% load static %}
<script src="{% static 'tree_view.js' %}"></script>
{% endblock %}


