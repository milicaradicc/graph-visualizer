{% load static %}

<head>
    <link rel="stylesheet" href="{% static 'style.css' %}">
</head>

{% include "workspace_management.html" %}

{% if messages %}
    <div class="popup-container">
      {% for message in messages %}
        <div class="popup {{ message.tags }}">
          <span class="popup-text">{{ message }}</span>
          <span class="popup-close" onclick="this.parentElement.remove()">Ã—</span>
        </div>
      {% endfor %}
    </div>
  {% endif %}

  {% block content %}{% endblock %}

  <script>
    // Auto-close popups after 5 seconds
    setTimeout(() => {
      document.querySelectorAll(".popup").forEach(popup => popup.remove());
    }, 5000);
  </script>

<div class="graph-container">
    <div class="views">
<main>
    {{ block_visualizer_html | safe }}
</main>

        <!-- Tree view -->
        <div id="tree-view" class="graph-view">
            <h3>Tree View</h3>
            {% if tree_html %}
                {{ tree_html | safe }}
            {% else %}
                <svg id="tree-svg"></svg>
            {% endif %}
        </div>

        <!-- Main view -->
        <div id="main-view" class="graph-view">
            <h3>Main View</h3>
            {% if graph_html %}
                {{ graph_html | safe }}
            {% else %}
                <svg id="main-svg"></svg>
            {% endif %}
        </div>

        <!-- Bird view -->
        <div id="bird-view" class="graph-view">
            <h3>Bird View</h3>
            {% if bird_html %}
                {{ bird_html | safe }}
            {% else %}
                <svg id="bird-svg"></svg>
            {% endif %}
        </div>

    </div>
</div>